// customer.js

async function fetchCustomerLoans() {
  const res = await fetch("http://127.0.0.1:5000/api/loans", {
    credentials: "include"
  });

  const loans = await res.json();

  const table = document.getElementById("loanTable");
  table.innerHTML = "<tr><th>ID</th><th>Customer ID</th><th>Amount</th><th>Term</th><th>Rate</th></tr>";

  loans.forEach(loan => {
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${loan.loan_id}</td>
      <td>${loan.customer_id}</td>
      <td>${loan.amount}</td>
      <td>${loan.term}</td>
      <td>${loan.interest_rate}</td>
    `;
    table.appendChild(row);
  });
}

async function logout() {
  await fetch("http://127.0.0.1:5000/api/logout", {
    method: "POST",
    credentials: "include"
  });
  window.location.href = "index.html";
}

document.getElementById("logoutBtn").addEventListener("click", logout);

window.onload = fetchCustomerLoans;
